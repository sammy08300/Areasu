<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualiseur d'Area pour osu! - Structure Séparée</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lien vers ton fichier CSS personnalisé -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-900 text-gray-200 font-sans p-5">

    <div class="container max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Colonne de Gauche: Configuration + Récapitulatif -->
        <div class="lg:col-span-1 flex flex-col gap-6">
            <!-- Card: Tablette -->
            <div class="card bg-gray-800 p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-semibold text-white mb-4 pb-2 border-b border-gray-700">Tablette</h2>
                <div class="space-y-4">
                    <div class="input-group flex items-center gap-3">
                        <label for="tabletPresetSelect" class="w-20 font-medium text-gray-400 flex-shrink-0">Preset:</label>
                        <select id="tabletPresetSelect" class="flex-grow bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition" disabled>
                            <option value="" disabled selected>-- Chargement... --</option>
                            <option value="custom">-- Personnalisé --</option>
                            <!-- Les presets seront chargés ici par JS -->
                        </select>
                    </div>
                    <hr id="tablet-manual-hr" class="border-gray-600/50 hidden">
                    <div id="tablet-width-group" class="input-group flex items-center gap-3 hidden">
                        <label for="tabletWidth" class="w-28 font-medium text-gray-400 flex-shrink-0">Largeur:</label>
                        <input type="number" id="tabletWidth" min="0.1" value="152" step="0.1" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        <span class="unit text-gray-500 text-sm pl-1">mm</span>
                    </div>
                    <div id="tablet-height-group" class="input-group flex items-center gap-3 hidden">
                        <label for="tabletHeight" class="w-28 font-medium text-gray-400 flex-shrink-0">Hauteur:</label>
                        <input type="number" id="tabletHeight" min="0.1" value="95" step="0.1" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        <span class="unit text-gray-500 text-sm pl-1">mm</span>
                    </div>
                </div>
            </div>
            <!-- Card: Zone Active -->
            <div class="card bg-gray-800 p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-semibold text-white mb-4 pb-2 border-b border-gray-700">Zone Active</h2>
                <div class="space-y-4">
                    <!-- Ratio -->
                    <div>
                        <h3 class="text-base font-medium text-gray-400 mb-2">Ratio</h3>
                        <div class="flex flex-wrap items-center gap-4">
                            <div class="input-group flex items-center gap-3 flex-1 min-w-[150px]">
                                <label for="customRatio" class="w-16 font-medium text-gray-400 flex-shrink-0">Ratio:</label>
                                <input type="number" id="customRatio" min="0.001" step="0.001" value="1.600" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                            </div>
                            <label for="lockRatio" class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" id="lockRatio" class="sr-only peer" checked>
                            <div class="w-11 h-6 bg-gray-600 rounded-full peer peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-500 peer-focus:ring-offset-2 peer-focus:ring-offset-gray-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                            <span class="ml-3 text-sm font-medium text-gray-300">Verrouiller</span>
                            </label>
                        </div>
                    </div>
                    <!-- Taille -->
                    <div>
                        <h3 class="text-base font-medium text-gray-400 mb-2">Taille</h3>
                        <div class="space-y-3">
                            <div class="input-group flex items-center gap-3">
                                <label for="areaWidth" class="w-20 font-medium text-gray-400 flex-shrink-0">Largeur:</label>
                                <input type="number" id="areaWidth" min="0.1" value="152" step="0.1" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                <span class="unit text-gray-500 text-sm pl-1">mm</span>
                            </div>
                            <div class="input-group flex items-center gap-3">
                                <label for="areaHeight" class="w-20 font-medium text-gray-400 flex-shrink-0">Hauteur:</label>
                                <input type="number" id="areaHeight" min="0.1" value="95" step="0.1" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                <span class="unit text-gray-500 text-sm pl-1">mm</span>
                            </div>
                            <button id="swap-btn" class="btn btn-primary btn-sm w-full mt-1 px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800">Inverser Largeur / Hauteur</button>
                        </div>
                    </div>
                    <!-- Position -->
                    <div>
                        <h3 class="text-base font-medium text-gray-400 mb-2">Position (Centre)</h3>
                        <div class="space-y-3">
                            <div class="input-group flex items-center gap-3">
                                <label for="areaOffsetX" class="w-20 font-medium text-gray-400 flex-shrink-0">Offset X:</label>
                                <input type="number" id="areaOffsetX" value="76.000" step="0.001" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                <span class="unit text-gray-500 text-sm pl-1">mm</span>
                            </div>
                            <div class="input-group flex items-center gap-3">
                                <label for="areaOffsetY" class="w-20 font-medium text-gray-400 flex-shrink-0">Offset Y:</label>
                                <input type="number" id="areaOffsetY" value="47.500" step="0.001" class="w-28 bg-gray-700 border border-gray-600 rounded-md p-2 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                <span class="unit text-gray-500 text-sm pl-1">mm</span>
                            </div>
                            <button id="center-btn" class="btn btn-secondary btn-sm w-full mt-1 px-3 py-1.5 text-sm bg-purple-600 hover:bg-purple-700 focus:ring-purple-500 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800">Centrer la Zone Active</button>
                        </div>
                    </div>
                    <!-- Actions -->
                    <hr class="!my-6 border-gray-700">
                    <div class="flex flex-wrap gap-3 justify-center">
                        <button id="copy-btn" class="btn btn-info px-4 py-2 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 bg-sky-600 hover:bg-sky-700 focus:ring-sky-500">Copier Infos</button>
                        <button id="save-btn" class="btn btn-success px-4 py-2 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 bg-green-600 hover:bg-green-700 focus:ring-green-500">Sauvegarder Area</button>
                        <button id="cancel-edit-btn" class="btn btn-danger px-4 py-2 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 bg-red-600 hover:bg-red-700 focus:ring-red-500 hidden">Annuler Édition</button>
                    </div>
                </div>
            </div>
            <!-- Card: Récapitulatif -->
            <div class="card bg-gray-800 p-6 rounded-xl shadow-lg">
                <h2 class="text-xl font-semibold text-white mb-4 pb-2 border-b border-gray-700">Récapitulatif</h2>
                <div class="grid grid-cols-2 gap-x-4 gap-y-1 text-sm">
                    <p><strong>Dims Tablette:</strong></p>
                    <p class="text-gray-300 text-right" id="tablet-dimensions-info">... mm</p>
                    <p><strong>Ratio Tablette:</strong></p>
                    <p class="text-gray-300 text-right" id="tablet-ratio-info">...</p>
                    <p class="mt-2"><strong>Dims Area:</strong></p>
                    <p class="text-gray-300 text-right mt-2" id="dimensions-info">... mm</p>
                    <p><strong>Surface Area:</strong></p>
                    <p class="text-gray-300 text-right" id="area-info">... mm²</p>
                    <p><strong>Ratio Area:</strong></p>
                    <p class="text-gray-300 text-right" id="ratio-info">...</p>
                    <p><strong>Position Area:</strong></p>
                    <p class="text-gray-300 text-right" id="position-info">... mm</p>
                </div>
            </div>
        </div>

        <!-- Colonne Centrale: Visualisation & Favoris -->
        <div class="lg:col-span-2 flex flex-col gap-6">
            <!-- Card: Visualisation -->
            <div class="card bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col">
                <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-700">
                    <h2 class="text-xl font-semibold text-white flex-shrink-0">Visualisation</h2>
                    <label for="toggleGridCheckbox" class="flex items-center gap-2 cursor-pointer text-sm">
                        <input type="checkbox" id="toggleGridCheckbox" checked class="h-4 w-4 rounded border-gray-500 bg-gray-600 text-blue-500 focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-gray-800">
                        <span class="text-gray-300 select-none">Afficher Grille</span>
                    </label>
                </div>
                <div id="visual-container" class="visual-container relative flex justify-center items-center h-[350px] bg-gray-900/50 rounded-lg p-4 overflow-hidden">
                    <div id="tablet-boundary" class="border-2 border-gray-500 box-border relative bg-black/20 flex-shrink-0">
                        <!-- Grille générée par Tailwind -->
                        <div id="backgroundGrid" class="absolute inset-0 bg-[radial-gradient(theme('colors.gray.700/50%')_1px,transparent_1px)] [background-size:1rem_1rem] opacity-30"></div>
                        <!-- Rectangle représentant la zone active -->
                        <div id="rectangle" class="rectangle absolute bg-blue-600/80 border border-blue-400 shadow-lg shadow-blue-500/30" style="transition: width 0.1s linear, height 0.1s linear, top 0.1s linear, left 0.1s linear;">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Card: Mes Areas Favoris -->
            <div class="card bg-gray-800 p-6 rounded-xl shadow-lg">
                <div class="flex justify-between items-center mb-4 pb-2 border-b border-gray-700">
                    <h2 class="text-xl font-semibold text-white">Mes Areas Favoris</h2>
                    <div id="sort-options" class="flex gap-2">
                        <!-- Boutons de tri (les classes actives seront gérées par JS) -->
                        <button data-sort="date" class="sort-button btn btn-primary btn-sm px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800" title="Trier par Date (plus récent)">Date</button>
                        <button data-sort="name" class="sort-button btn btn-primary btn-sm px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800" title="Trier par Nom (A-Z)">Nom</button>
                        <button data-sort="size" class="sort-button btn btn-primary btn-sm px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 rounded-md font-medium text-white transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800" title="Trier par Taille (plus grand)">Taille</button>
                    </div>
                </div>
                <div id="favorites-list" class="space-y-2 max-h-60 overflow-y-auto pr-2">
                    <!-- Placeholder si la liste est vide -->
                    <p class="text-gray-500 italic text-center hidden">Aucun favori sauvegardé.</p>
                    <!-- Les favoris seront chargés ici par JS -->
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Contextuel (pour l'alignement) -->
    <div id="context-menu" class="absolute hidden bg-gray-700 border border-gray-600 rounded-md p-1 shadow-xl z-50 min-w-[200px]">
        <button id="align-left" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Aligner à Gauche</button>
        <button id="align-center-h" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Centrer Horizontalement</button>
        <button id="align-right" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Aligner à Droite</button>
        <hr class="border-gray-600 my-1"> <!-- Utilise la classe CSS pour hr -->
        <button id="align-top" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Aligner en Haut</button>
        <button id="align-center-v" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Centrer Verticalement</button>
        <button id="align-bottom" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Aligner en Bas</button>
        <hr class="border-gray-600 my-1"> <!-- Utilise la classe CSS pour hr -->
        <button id="align-center" class="context-menu-button block w-full text-left px-4 py-2 text-sm text-gray-200 rounded-md hover:bg-blue-700 hover:text-white">Centrer Tout</button>
    </div>

    <!-- Placeholder pour les notifications (peut être géré dynamiquement par JS) -->
    <div id="notification-placeholder"></div>

    <!-- Lien vers ton fichier JavaScript -->
    <!-- Placé à la fin du body pour s'assurer que le DOM est chargé -->
    <script src="js/script.js"></script>

</body>
</html>